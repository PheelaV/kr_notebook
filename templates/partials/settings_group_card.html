<!-- Single group card - used by HTMX refresh -->
<div id="group-{{ group.id }}" class="p-4 border border-gray-200 dark:border-gray-600 rounded-lg">
  <div class="flex items-center justify-between mb-2">
    <div>
      <span class="font-medium text-gray-900 dark:text-white">{{ group.name }}</span>
      <span class="text-xs text-gray-400 ml-2">({{ group.id }})</span>
      <span class="text-xs text-gray-500 dark:text-gray-400 ml-2">{{ group.members.len() }} member{% if group.members.len() != 1 %}s{% endif %}</span>
    </div>
    <button type="button"
            hx-delete="/settings/group/{{ group.id }}"
            hx-target="#group-{{ group.id }}"
            hx-swap="outerHTML"
            hx-confirm="Delete group {{ group.name }}?"
            class="text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/50">
      Delete
    </button>
  </div>
  {% if let Some(desc) = group.description %}
  <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">{{ desc }}</p>
  {% endif %}
  <!-- Current Members -->
  {% if !group.members.is_empty() %}
  <div class="flex flex-wrap gap-1 mb-2">
    {% for member in &group.members %}
    <span class="inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300">
      {{ member.username }}
      <button type="button"
              hx-post="/settings/group/remove-member"
              hx-vals='{"group_id": "{{ group.id }}", "user_id": "{{ member.id }}"}'
              hx-target="#group-{{ group.id }}"
              hx-swap="outerHTML"
              class="hover:text-red-600 dark:hover:text-red-400" title="Remove from group">Ã—</button>
    </span>
    {% endfor %}
  </div>
  {% endif %}
  <!-- Add Member -->
  <form hx-post="/settings/group/add-member"
        hx-target="#group-{{ group.id }}"
        hx-swap="outerHTML"
        class="flex gap-2">
    <input type="hidden" name="group_id" value="{{ group.id }}">
    <select name="user_id" class="flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
      {% for user in users %}
      <option value="{{ user.id }}">{{ user.username }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="px-3 py-1 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700">
      Add
    </button>
  </form>
</div>
